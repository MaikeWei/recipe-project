<!DOCTYPE html>
<html>
<head>

<script  src="jquery.js"> </script>
<link type="text/css" rel="stylesheet" href="stylesheet.css"/>
<meta charset="utf-8">

<title>Rezeptliste</title>

<script type="text/javascript">
var cur = 0;

shoppinglist = new Array ();

var rezeptListe = loadData();


function loadData(){

	var rezeptBuch = new Array ();
	
	var zutatenListe = new Array();
	
	zutatenListe.push ({name: "Salat", menge: 1, einheit: "Kopf"});
	zutatenListe.push ({name: "Tomaten", menge: 300, einheit: "g"});
	zutatenListe.push ({name: "Gurke", menge: 150, einheit: "g"});
	zutatenListe.push ({name: "Feta", menge: 200, einheit: "g"});
	zutatenListe.push ({name: "Oliven", menge: 120, einheit: "g"});
	zutatenListe.push ({name: "Olivenöl", menge: 6, einheit: "EL"});
	zutatenListe.push ({name: "Balsamico Essig", menge: 2, einheit: "EL"});
	zutatenListe.push ({name: "Salz", menge: 1, einheit: "Prise"});
	zutatenListe.push ({name: "Pfeffer", menge: 1, einheit: "Prise"});
	rezeptBuch.push( 
		{titel: "Griechischer Salat", 
		 zutaten : zutatenListe, 
		 text_schwierigkeit:"<b>Schwierigkeit: leicht </b>",
		 text_txt: "Die Tomaten waschen und in Spalten schneiden. Die Salatgurke waschen und in Scheiben schneiden. Den Schafskäse abtropfen lassen und würfeln. Die Oliven ebenfalls abtropfen lassen. Alle vorbereiteten Zutaten in eine Schüssel geben. Den Salat waschen, abtropfen lassen und in mundgerechte Stücke reißen. Anschließend den Salat auch in die Schüssel geben. Alle Zutaten durcheinander mischen. Danach das Öl und den Essig über das Gemüse geben. Den Salat mit Salz und Pfeffer würzen und noch einmal durcheinander mischen. Jetzt den Salat servieren.", 
		 zeit : 15
		}
	);
	
	zutatenListe = new Array();
	
	zutatenListe.push ({name: "Frühlingszwiebel(n)", menge: 4, einheit: "Stück"});
	zutatenListe.push ({name: "Chilischote(n)", menge: 1, einheit: "Stück"});
	zutatenListe.push ({name: "Koriandergrün", menge: 15, einheit: "g"});
	zutatenListe.push ({name: "Tomaten", menge: 750, einheit: "g"});
	zutatenListe.push ({name: "Knoblauch", menge: 2, einheit: "Zehe/n"});
	zutatenListe.push ({name: "Kichererbsen", menge: 400, einheit: "g"});
	zutatenListe.push ({name: "Feta", menge: 30, einheit: "g"});
	zutatenListe.push ({name: "Limette(n)", menge: 1, einheit: " "});
	rezeptBuch.push( 
		{titel: "Mexikanische Tomatensuppe", 
		 zutaten : zutatenListe, 
		 text_schwierigkeit:"<b>Schwierigkeit: total einfach</b>",
		 text_txt: "Die Frühlingszwiebeln putzen und mit der Chilischote und den Korianderstängeln fein schneiden. Die Tomaten von den Stielansätzen befreien und vierteln. Von den weißen Teilen der Frühlingszwiebeln die Hälfte beiseitestellen, ebenso die Hälfte der Chili sowie der Korianderblätter. Den Rest mit 2 TL Öl in einen großen Topf geben. Den Knoblauch durch die Presse drücken und alles bei mittlerer Hitze 2 Minuten braten, dann die Tomaten hinzufügen. Die Kichererbsen mitsamt der Flüssigkeit und 600ml kochendem Wasser dazugießen, den Deckel auflegen. Die Suppe <button type='button' onclick='(counter1)' class='timer' id='counter1'> 20 Minuten</button> köcheln lassen, dann mit Salz und Pfeffer abschmecken, die Tomaten zerdrücken. Zum Servieren den Feta zerbröseln und darüberkrümeln, die Reste von Frühlingszwiebeln, Chili und Korianderblättern daraufstreuen und Limettenspalten dazu servieren.", 
		 zeit : 30
		}
	);


	zutatenListe = new Array();
	
	zutatenListe.push ({name: "Paprika", menge: 200, einheit: "g"});
	zutatenListe.push ({name: "Zucchini", menge: 250, einheit: "g"});
	zutatenListe.push ({name: "Chilischote(n)", menge: 1, einheit: "Stück"});
	zutatenListe.push ({name: "Vollkorn-Baguette", menge: 40, einheit: "g"});
	zutatenListe.push ({name: "Olivenöl", menge: 2, einheit: "EL"});
	zutatenListe.push ({name: "Bandnudeln", menge: 400, einheit: "g"});
	zutatenListe.push ({name: "Salz", menge: 1, einheit: "Prise"});
	zutatenListe.push ({name: "Rapsöl", menge: 1, einheit: "EL"});
	zutatenListe.push ({name: "Knoblauch", menge: 1, einheit: "Zehe/n"});
	zutatenListe.push ({name: "Pfeffer", menge: 1, einheit: "Prise"});
	rezeptBuch.push( 
		{titel: "Paprika-Zucchini-Nudeln", 
		 zutaten : zutatenListe, 
		 text_schwierigkeit:"<b>Schwierigkeit: leicht</b>",
		 text_txt: "Paprikaschoten halbieren, entkernen und waschen. Ein Backblech mit Alufolie auslegen. Paprikahälften mit der Hautseite nach oben darauf verteilen. Unter dem vorgeheizten Backofengrill 6-8 Minuten rösten, bis die Haut leicht schwarz wird. Inzwischen Zucchini putzen, waschen, quer halbieren und längs in schmale Streifen schneiden. Kapern abtropfen lassen. Paprikaschoten aus dem Backofen nehmen und etwa 5 Minuten mit einem feuchten Küchentuch bedecken. Anschließend häuten und würfeln. Chilischote längs halbieren, entkernen, waschen und fein hacken. Brot würfeln, mit den Händen fein zerkrümeln und in eine Schüssel geben. In einer kleinen beschichteten Pfanne 1 EL Olivenöl erhitzen. Brotkrümel und Chili darin unter häufigem Rühren goldbraun rösten. Nudeln nach Packungsanleitung in reichlich kochendem Salzwasser bissfest garen. Inzwischen restliches Öl in einer großen beschichteten Pfanne erhitzen. Zucchini darin unter Rühren bei mittlerer Hitze weichdünsten. Knoblauch schälen und durch eine Knoblauchpresse direkt zu den Zucchini geben. Paprikawürfel und Kapern unterrühren. Salzen, pfeffern und warm halten. Nudeln abgießen und abtropfen lassen, dabei 75 ml Nudelwasser auffangen. Nudeln und Gemüse mischen, Nudelwasser darunterrühren. Die Paprika-Zucchini-Nudeln mit Chilibröseln bestreuen und servieren.", 
		 zeit : 45
		}
	);	
	return rezeptBuch;
}

	
function zeigeRezept(){
	var rezeptListe = loadData();

	var myString ="<h1>Rezepte</h1><h2>"+rezeptListe[cur].titel+"</h2>";

	myString += "<button onClick='zeigePortion()' >2 Portionen</button>";

	myString += "<a onclick='zurueck()' href='#'><img class='pfeile' src='icons/pfeil_links.png/'></a>"+" ";

	myString += "<a onclick='vor()' href='#'><img class='pfeile' src='icons/pfeil_rechts.png/'></a><br/><br/>";


	myString += "<table>";
	myString += "<tr><td><b>Zutaten</b></td><td><b>Menge</b></td><td></td></tr>";	
	for (var i = 0; i < rezeptListe[cur].zutaten.length; i++){	
	myString += "<tr><td>"+rezeptListe[cur].zutaten[i].name+"</td><td>"+rezeptListe[cur].zutaten[i].menge+" "+rezeptListe[cur].zutaten[i].einheit+"</td><td><a onClick='addToListe(\""+rezeptListe[cur].zutaten[i].menge+' '+rezeptListe[cur].zutaten[i].einheit+' '+rezeptListe[cur].zutaten[i].name+"\")' ><img class='plus' src='icons/plus.png/'></a></td></tr>";
	}
	myString += "</table><br/>";
	myString += "<table>";
	myString += "<tr><td><b>Zubereitung</b></td><td>"+rezeptListe[cur].text_schwierigkeit+"</td></tr><tr><td></td><td>"+rezeptListe[cur].text_txt+"</td></tr>";
	myString += "</table><br/>";
	
	myString += "<table>";
	myString += "<tr><td><b>Dauer</b></td><td>"+rezeptListe[cur].zeit+" Minuten</td></tr>";
	
    myString += "</table><br/>";

	document.getElementById('display').innerHTML = myString;
}	

function zeigePortion(){
	var rezeptListe = loadData();

	var myString ="<h1>Rezepte</h1><h2>"+rezeptListe[cur].titel+"</h2>";

	myString += "<button onClick='zeigeRezept()' >4 Portionen</button>";

	myString += "<a onclick='zurueck()' href='#'><img class='pfeile' src='icons/pfeil_links.png/'></a>"+" ";

	myString += "<a onclick='vor()' href='#'><img class='pfeile' src='icons/pfeil_rechts.png/'></a><br/><br/>";


	myString += "<table>";
	myString += "<tr><td><b>Zutaten</b></td><td><b>Menge</b></td><td></td></tr>";	
	for (var i = 0; i < rezeptListe[cur].zutaten.length; i++){	
	myString += "<tr><td>"+rezeptListe[cur].zutaten[i].name+"</td><td>"+rezeptListe[cur].zutaten[i].menge/2+" "+rezeptListe[cur].zutaten[i].einheit+"</td><td><a onClick='addToListe(\""+rezeptListe[cur].zutaten[i].menge/2+' '+rezeptListe[cur].zutaten[i].einheit+' '+rezeptListe[cur].zutaten[i].name+"\")' ><img class='plus' src='icons/plus.png/'></a></td></tr>";
	}
	myString += "</table><br/>";
	myString += "<table>";
	myString += "<tr><td><b>Zubereitung</b></td><td>"+rezeptListe[cur].text_schwierigkeit+"</td></tr><tr><td></td><td>"+rezeptListe[cur].text_txt+"</td></tr>";
	myString += "</table><br/>";
	
	myString += "<table>";
	myString += "<tr><td><b>Dauer</b></td><td>"+rezeptListe[cur].zeit+" Minuten</td></tr>";
    myString += "</table><br/>";

	document.getElementById('display').innerHTML = myString;
}	
function vor(){
	if (cur < 3){cur++;} //Länge des Rezeptes
	console.log("Aktuelles Rezept:"+cur);
	zeigeRezept();
}

function zurueck(){
	if (cur > 0){cur--;}
	console.log("Aktuelles Rezept:"+cur);
	zeigeRezept();
}

function zeigeShoppinglist(){
	restoreContents();
	var myString = "<h2>Einkaufsliste</h2>";

	myString += "<button onclick='allesLoeschen(\""+shoppinglist[i]+"\")' >löschen</button>";
	
	myString += "<ul>";
	for (var i = 0; i < shoppinglist.length; i++){	
		myString += "<li id='dinge'>"+shoppinglist[i]+"<button onclick='loeschen(\""+shoppinglist[i]+"\")' >löschen</button></li>";
	}
	myString += "</ul>";
	document.getElementById('display').innerHTML = myString;
}


function populateStorage (){
	localStorage.setItem('shoppingInhalt', JSON.stringify(shoppinglist));
}
function restoreContents (){
	shoppinglist = JSON.parse(localStorage.getItem('shoppingInhalt'));
	console.log("ausgeben");
}

function addToListe(eintrag) {

	console.log("klappt" + eintrag);
	shoppinglist.push(eintrag);
	populateStorage();
}

function allesLoeschen (waren) {
	shoppinglist.splice(waren);
	   localStorage.clear();
    window.location.reload();
	}
//var waren = new Array (shoppinglist[i])

	//for (var i = 0; i < shoppinglist.length; i++){


//function loeschen(){
//	entfernen(dinge)
//}

//timer
Function.prototype.Timer = function (interval, calls, onend) {
	var count = 0;
	var payloadFunction = this;
	var startTime = new Date();
	var callbackFunction = function () {
		return payloadFunction(startTime, count);
	};
	var endFunction = function () {
		if (onend) {
			onend(startTime, count, calls);
		}
	};
	var timerFunction = function () {
		count++;
		if (count < calls && callbackFunction() != false) {
			window.setTimeout(timerFunction, interval);
		} else {
			endFunction();
		}
	};
	timerFunction();
};

function leadingzero(number) {
	return (number < 10) ? '0' + number : number;
}

function countdown(seconds, target) {
	var element = document.getElementById(target);
	var calculateAndShow = function () {
		if (seconds > 0) {
			var h = Math.floor(seconds / 3600);
			var m = Math.floor((seconds % 3600) / 60);
			var s = seconds % 60;
			element.innerHTML = leadingzero(h) + ':' + leadingzero(m) + ':' +
				leadingzero(s);
			seconds--;
		} else {
			return false;
		}
	};
	var completed = function () {
		element.innerHTML = "<strong>Fertig!<\/strong>";
	};
	calculateAndShow.Timer(1000, Infinity, completed);
}
window.onload = function () {
	new countdown(20, 'counter1');
	new countdown(10, 'counter2');

	
};





</script>

</head>
<body onload="zeigeRezept()" >

<a onclick="zeigeShoppinglist()" href="#">Einkaufsliste</a>

<a onclick="zeigeRezept()" href="#">Rezepte</a>

<div id="display"></div>

</body>
</html>